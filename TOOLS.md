# TOOLS.md - ScrollVault Workspace Notes

## CRITICAL: File Hygiene

**NEVER write large files to the workspace root** (`/home/degenai/.openclaw/workspace/`). Every file there gets loaded into agent context. Large files cause "prompt too large" errors.

- Temporary artifacts (JSON, HTML, raw data): save to `drafts/` subdirectory or `/home/degenai/scrollvault/data/drafts/`
- Workspace root = small docs only (under 10KB)

## Site Info

- **URL:** https://scrollvault.net
- **Staging:** https://staging.scrollvault.net
- **Build script:** `/home/degenai/scrollvault/build.js`
- **Data:** `/home/degenai/scrollvault/data/posts.json`
- **Stylesheet:** `/home/degenai/scrollvault/style.css`

## Pipeline

6-step agent pipeline: Scout → Writer → Editor → Fact Checker → Publisher → QA

```bash
# Full pipeline
bash /home/degenai/scrollvault/pipeline.sh

# Dry run (scout only)
bash /home/degenai/scrollvault/pipeline.sh --dry-run

# Rebuild site
node /home/degenai/scrollvault/build.js

# Build to staging
node /home/degenai/scrollvault/build.js --staging
```

## Agent Prompts

Located in `/home/degenai/scrollvault/agents/`:
scout.txt, writer.txt, editor.txt, factchecker.txt, publisher.txt, designer.txt, qa.txt, automation.txt, heartbeat.txt, data-analyst.txt, seo-optimizer.txt

## CRITICAL: Hand-Crafted Pages

These pages are NOT generated by build.js. They have their own inline CSS, nav, and footer:
- `tools/index.html` — Tools Hub (links to all tools)
- `tools/manabase/index.html` — Mana Base Calculator
- `tools/lands/index.html` — Dual Lands Reference
- `tools/hypergeometric/index.html` — Hypergeometric Calculator
- `tools/hand-simulator/index.html` — Opening Hand Simulator
- `tools/price-checker/index.html` — Deck Price Checker
- `tools/commander-bracket/index.html` — Commander Bracket Calculator
- `tools/sealed/index.html` — Sealed Pool Simulator
- `decks/index.html` — Top Decks hub
- `draft/index.html` — Draft Simulator

**DO NOT overwrite these files.** If nav links, footer, or shared CSS changes, update all 10 files too.
The `style.css` file in the root is used by `decks/index.html` — changes there affect the decks page.

## File Ownership

All files under `/home/degenai/scrollvault/` must be `degenai:nobody` (Apache runs as nobody).
```bash
chown -R degenai:nobody /home/degenai/scrollvault/ 2>/dev/null || true
```

## Logs

- Pipeline logs: `/home/degenai/scrollvault/logs/pipeline-*.log`
- Gateway log: `/tmp/openclaw-gateway.log`
